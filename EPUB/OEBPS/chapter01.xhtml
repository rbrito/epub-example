<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>Just a Simple ePub test</title>
  </head>

  <body>
    <h1>Silly content for display</h1>
    <p>
      This is the first paragraph in an ePub digital book (i.e., an
      electronic book, or e-book). This test is meant to be akin to a
      programmer's "Hello, World!" application, but since we need the
      content of the book to be at least moderately long, so that there are
      reflows, I am trying to be verbose.
    </p>

    <p>
      I expect that the line breaks of ebook readers
      like <a href="http://www.fbreader.org/">FBReader</a> will be, in
      particular, a little more beautiful than those presented by the
      competition, since it uses a good hyphenation algorithm (the same that
      Prof. Knuth uses in his superb TeX engine?).
    </p>

    <h2>Brief description of an ePub archive</h2>
    <p>
      An ePub archive is composed of three parts:
    </p>

    <ul>
      <li>
	The "content", being constituted of a set of XHTML files (the "real"
	content of the book), together with Cascading Style Sheets (being a
	subset of the CSS 2.0 standard, with a few extra properties).
      </li>
      <li>
	Accompanying the content per se, there is a description of the
	structure of the book, in XML format. This description is made up of
	a manifest file
      </li>
      <li>
	The final step is just packing it up all in a ZIP file, and with
	extension <code>.epub</code>. The files inside this container should
	be in a hierarchy as given by:
      </li>
    </ul>

    <h2>A "Hello, World!" version of an ePub ebook.</h2>

    <p>Some gotchas:</p>

    <ul>
      <li>
	The directory structure is not obvious at all and it appears to have
	some variation from descriptions around the Internet.
      </li>
      <li>
	The <code>.epub</code> file is just a zip file that has:

	<ol>
	  <li>
	    A certain directory structure (see below)
	  </li>
	  <li>
	    A requirement that the first file, <code>mimetype</code>, to be stored
	    uncompressed, have exactly the contents <code>application/epub+zip</code>
	    with no trailing CR, LF, NL etc., and have no special attributes
	    or extra fields.
	  </li>
	  <li>
	    The tree hierarchy looks approximately like this:

	    <pre>
         .
         ├── mimetype
         ├── META-INF
         │   └── container.xml
         └── OEBPS
             ├── book.ncx
             ├── book.opf
             └── chapter01.xhtml
	    </pre>
	  </li>
	</ol>
      </li>
      <li>
	The file <code>container.xml</code> serves as a "bootstrap" for the
	book.
      </li>
      <li>
	The <code>.opf</code> file contains at a minimum, metadata of the
	book, the list of all files (except
	for <code>mimetype</code>, <code>container.xml</code>, and
	the <code>.opf</code>) that compose the book, with their full path,
	IDs and media-types, and, lastly, the "linear" list of topics in
	which the book should be read.
      </li>
      <li>
	The content of the <code>dc:identifier</code> element of
	the <code>.opf</code> file has to match the property of
	the <code>meta</code> element with
	name <code>dtb:uid</code>. Otherwise,
	<a href="http://www.threepress.org/document/epub-validate/">http://www.threepress.org/document/epub-validate/</a>
	does not validate the document.
      </li>
    </ul>

  </body>
</html>
